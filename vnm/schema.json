{
  "dataset": {
    "name": "Harmonized Dengue-Climate-Population Dataset",
    "country_iso3": "VNM",
    "admin_level": 1,
    "temporal_resolution": "monthly",
    "primary_key": [
      "org_id",
      "period"
    ],
    "time_range": "1998-01 to 2010-12",
    "row_count": 9612,
    "org_unit_count": 63,
    "population_year": 2010,
    "created_utc": "2026-01-14T10:46:04Z",
    "description": "Monthly dengue cases harmonized with ERA5-Land climate covariates and WorldPop population at administrative level 1."
  },
  "spatial_reference": {
    "administrative_units": {
      "level": 1,
      "name_field": "shapeName",
      "crs": "EPSG:4326",
      "source": {
        "name": "geoBoundaries (or OCHA COD-AB)",
        "source_url": "https://data.humdata.org/dataset/geoboundaries-admin-boundaries-for-viet-nam"
      },
      "notes": "Administrative boundaries define the spatial units used for all aggregation and joins."
    }
  },
  "sources": [
    {
      "name": "OpenDengue",
      "source_url": "https://opendengue.org/data.html",
      "use_in_dataset": [
        "dengue_cases"
      ]
    },
    {
      "name": "ERA5-Land",
      "provider": "ECMWF / C3S",
      "source_url": "https://cds.climate.copernicus.eu/",
      "use_in_dataset": [
        "t2m_mean_c_month",
        "tp_sum_mm_month",
        "rh2m_mean_month"
      ]
    },
    {
      "name": "WorldPop",
      "provider": "University of Southampton",
      "source_url": "https://www.worldpop.org/",
      "use_in_dataset": [
        "population",
        "population_year"
      ]
    },
    {
      "name": "geoBoundaries (or OCHA COD-AB)",
      "source_url": "https://data.humdata.org/dataset/geoboundaries-admin-boundaries-for-viet-nam",
      "use_in_dataset": [
        "org_name",
        "org_id"
      ]
    }
  ],
  "input_files": {
    "adm_boundaries": {
      "path": "data/vnm/input/ADM1.geojson",
      "sha256": "25dbc2fec9862016710118fc98042d3e803830c72361c91c4e864ae668fa9541"
    },
    "crosswalk": {
      "path": "data/vnm/mapping/adm1_name_to_org_id.csv",
      "sha256": "5cb5cde3dded3f8f38cfbcb461808c22fcb64f3ad8045f44b7fcbe1ded894510"
    },
    "dengue_panel": {
      "path": "data/vnm/processed/admin1_monthly_1994-02_to_2010-12_DENGUE.csv",
      "sha256": "cb6628a263e284a043d73f2ff72cadabfaa8df6980811e252f6cda9c8f911b97"
    },
    "era5_land_netcdf": {
      "path": "data/vnm/input/era5_land_monthly_1998_2024.nc",
      "sha256": "8720073421b86fce5dbba12d72a2cc8f5f901ec0d7f9bebae4e65540fb071bf3"
    },
    "population_csv": {
      "path": "data/vnm/intermediate/adm1_population.csv",
      "sha256": "648d0c55df3bb16aa4933a778858a50d8787a12fe7371aeed3d655e6ace5fd61"
    }
  },
  "processing_overview": {
    "health": {
      "temporal_aggregation": "Monthly sum of dengue cases",
      "spatial_alignment": "Mapped to org_id using name normalization + alias mapping (preprocessor output crosswalk)"
    },
    "climate": {
      "temporal_aggregation": {
        "t2m": "Monthly mean",
        "tp": "Monthly sum",
        "rh2m": "Monthly mean (derived)"
      },
      "spatial_aggregation": "Area-weighted aggregation of gridded ERA5-Land to administrative polygons (weights ~ cos(latitude))",
      "unit_conversions": [
        "Temperature Kelvin → °C (if needed)",
        "Precipitation meters → millimeters"
      ]
    },
    "population": {
      "spatial_aggregation": "WorldPop raster sum within administrative polygons",
      "temporal_handling": "Static snapshot for population_year"
    }
  },
  "fields": {
    "org_id": {
      "type": "string",
      "description": "Stable identifier for administrative unit (ADM1). Used for joins across dengue, climate, and population.",
      "source": {
        "name": "Derived",
        "inputs": [
          "boundaries"
        ],
        "details": "Generated during preprocessing and written to a crosswalk mapping ADM names to org_id."
      },
      "processing": {
        "artifact": "data/vnm/mapping/adm1_name_to_org_id.csv",
        "method": "Deterministic ID assignment after name normalization and alias resolution."
      }
    },
    "org_name": {
      "type": "string",
      "description": "Human-readable name of the administrative unit (ADM1).",
      "source": {
        "name": "geoBoundaries (or OCHA COD-AB)",
        "source_url": "https://data.humdata.org/dataset/geoboundaries-admin-boundaries-for-viet-nam"
      },
      "processing": {
        "notes": "Names may be normalized for matching with health data sources."
      }
    },
    "period": {
      "type": "string",
      "format": "YYYY-MM",
      "description": "Calendar month of observation.",
      "source": {
        "name": "Derived",
        "inputs": [
          "health calendar dates",
          "ERA5-Land time coordinate"
        ],
        "details": "All variables aligned to monthly periods."
      }
    },
    "dengue_cases": {
      "type": "integer",
      "unit": "cases",
      "description": "Total reported dengue cases for the administrative unit during the month.",
      "source": {
        "name": "OpenDengue",
        "source_url": "https://opendengue.org/data.html"
      },
      "processing": {
        "spatial": "Filtered/mapped to ADM1; mapped to org_id using name normalization and alias mapping.",
        "temporal": "Monthly totals (sum)."
      }
    },
    "t2m_mean_c_month": {
      "type": "number",
      "unit": "°C",
      "description": "Mean 2-meter air temperature aggregated to month and administrative unit.",
      "source": {
        "name": "ERA5-Land",
        "provider": "ECMWF / C3S",
        "source_url": "https://cds.climate.copernicus.eu/",
        "variable": "2m_temperature"
      },
      "processing": {
        "temporal": "Monthly mean",
        "spatial": "Area-weighted mean over ADM1 polygons",
        "unit_conversion": "Kelvin → Celsius (if needed)"
      }
    },
    "tp_sum_mm_month": {
      "type": "number",
      "unit": "mm",
      "description": "Total precipitation aggregated to month and administrative unit.",
      "source": {
        "name": "ERA5-Land",
        "provider": "ECMWF / C3S",
        "source_url": "https://cds.climate.copernicus.eu/",
        "variable": "total_precipitation"
      },
      "processing": {
        "temporal": "Monthly sum",
        "spatial": "Area-weighted aggregation over ADM1 polygons",
        "unit_conversion": "meters → millimeters"
      }
    },
    "rh2m_mean_month": {
      "type": "number",
      "unit": "%",
      "description": "Mean relative humidity at 2m aggregated to month and administrative unit (derived from temperature + dewpoint).",
      "source": {
        "name": "ERA5-Land",
        "provider": "ECMWF / C3S",
        "source_url": "https://cds.climate.copernicus.eu/",
        "variable": "relative_humidity (derived)"
      },
      "processing": {
        "temporal": "Monthly mean",
        "spatial": "Area-weighted mean over ADM1 polygons",
        "method": "Derived from 2m temperature and 2m dewpoint temperature."
      }
    },
    "population": {
      "type": "integer",
      "unit": "persons",
      "description": "Estimated population of the administrative unit (ADM1). Static across months for a given population_year.",
      "source": {
        "name": "WorldPop",
        "provider": "University of Southampton",
        "source_url": "https://www.worldpop.org/"
      },
      "processing": {
        "spatial": "Sum of raster cell values within ADM1 polygons",
        "temporal": "Static snapshot"
      }
    },
    "population_year": {
      "type": "integer",
      "description": "Reference year for the population estimate used in the population raster.",
      "source": {
        "name": "WorldPop",
        "provider": "University of Southampton",
        "source_url": "https://www.worldpop.org/"
      }
    }
  },
  "limitations": [
    "Spatial dengue availability depends on the OpenDengue (or equivalent) spatial extract; time range reflects observed subnational data availability.",
    "Population is a static snapshot for the reference year and does not vary by month."
  ],
  "reproducibility": {
    "config_file": "configs/VNM.yaml",
    "scripts": [
      "scripts/preprocessor.py",
      "scripts/download_era5_land.py",
      "scripts/aggregate_population.py",
      "scripts/aggregate_climate.py"
    ],
    "notes": "This schema describes provenance and transformations; exact parameters and file templates are defined in the config file."
  }
}
